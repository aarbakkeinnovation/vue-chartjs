import{_ as n,c as a,o as s,a as t}from"./app.4120d566.js";const h='{"title":"Migration to v4","description":"","frontmatter":{},"headers":[{"level":2,"title":"Tree-shaking","slug":"tree-shaking"},{"level":2,"title":"Changing the creation of Charts","slug":"changing-the-creation-of-charts"},{"level":2,"title":"New reactivity system","slug":"new-reactivity-system"}],"relativePath":"migration-to-v4/index.md","lastUpdated":1648801915000}',p={},e=t(`<h1 id="migration-to-v4" tabindex="-1">Migration to v4 <a class="header-anchor" href="#migration-to-v4" aria-hidden="true">#</a></h1><p>With v4, this library introduces a number of breaking changes. In order to improve performance, offer new features, and improve maintainability, it was necessary to break backwards compatibility, but we aimed to do so only when worth the benefit.</p><p>v4 is fully compatible with Chart.js v3.</p><h2 id="tree-shaking" tabindex="-1">Tree-shaking <a class="header-anchor" href="#tree-shaking" aria-hidden="true">#</a></h2><p>v4 of this library, <a href="https://www.chartjs.org/docs/latest/getting-started/v3-migration.html#setup-and-installation" target="_blank" rel="noopener noreferrer">just like Chart.js v3</a>, is tree-shakable. It means that you need to import and register the controllers, elements, scales, and plugins you want to use.</p><p>For a list of all the available items to import, see <a href="https://www.chartjs.org/docs/latest/getting-started/integration.html#bundlers-webpack-rollup-etc" target="_blank" rel="noopener noreferrer">Chart.js docs</a>.</p><p>v3:</p><div class="language-javascript"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Bar <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue-chartjs&#39;</span>
</code></pre></div><p>v4 \u2014 lazy way:</p><div class="language-javascript"><pre><code><span class="token keyword">import</span> <span class="token string">&#39;chart.js/auto&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Bar <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue-chartjs&#39;</span>
</code></pre></div><p>v4 \u2014 tree-shakable way:</p><div class="language-javascript"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Bar <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue-chartjs&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Chart <span class="token keyword">as</span> ChartJS<span class="token punctuation">,</span> Title<span class="token punctuation">,</span> Tooltip<span class="token punctuation">,</span> Legend<span class="token punctuation">,</span> BarElement<span class="token punctuation">,</span> CategoryScale<span class="token punctuation">,</span> LinearScale <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;chart.js&#39;</span>

ChartJS<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>Title<span class="token punctuation">,</span> Tooltip<span class="token punctuation">,</span> Legend<span class="token punctuation">,</span> BarElement<span class="token punctuation">,</span> CategoryScale<span class="token punctuation">,</span> LinearScale<span class="token punctuation">)</span>
</code></pre></div><p>Using the &quot;lazy way&quot; is okay to simplify the migration, but please consider using the tree-shakable way to decrease the bundle size.</p><p>Please note that typed chart components register their controllers by default, so you don&#39;t need to register them by yourself. For example, when using the Pie component, you don&#39;t need to register PieController explicitly.</p><div class="language-javascript"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Pie <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue-chartjs&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Chart <span class="token keyword">as</span> ChartJS<span class="token punctuation">,</span> Title<span class="token punctuation">,</span> Tooltip<span class="token punctuation">,</span> Legend<span class="token punctuation">,</span> ArcElement<span class="token punctuation">,</span> CategoryScale <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;chart.js&#39;</span>

ChartJS<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>Title<span class="token punctuation">,</span> Tooltip<span class="token punctuation">,</span> Legend<span class="token punctuation">,</span> ArcElement<span class="token punctuation">,</span> CategoryScale<span class="token punctuation">)</span>
</code></pre></div><h2 id="changing-the-creation-of-charts" tabindex="-1">Changing the creation of Charts <a class="header-anchor" href="#changing-the-creation-of-charts" aria-hidden="true">#</a></h2><p>In v3, you needed to import the component, and then either use extends or mixins and add it.</p><p>v3:</p><div class="language-javascript"><pre><code><span class="token comment">// BarChart.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Bar <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue-chartjs&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> Bar<span class="token punctuation">,</span>
  <span class="token function">mounted</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Overwriting base render method with actual data.</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">renderChart</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">labels</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;January&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;February&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;March&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">datasets</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&#39;GitHub Commits&#39;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">backgroundColor</span><span class="token operator">:</span> <span class="token string">&#39;#f87979&#39;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-vue"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>BarChart</span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> BarChart <span class="token keyword">from</span> <span class="token string">&#39;path/to/component/BarChart&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;DataPage&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span> BarChart <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>In v4, you need to import the component, pass props to it, and use Chart component as a standard Vue component.</p><div class="language-vue"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Bar</span> <span class="token attr-name">:chart-data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>chartData<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// DataPage.vue</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Bar <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue-chartjs&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Chart <span class="token keyword">as</span> ChartJS<span class="token punctuation">,</span> Title<span class="token punctuation">,</span> Tooltip<span class="token punctuation">,</span> Legend<span class="token punctuation">,</span> BarElement<span class="token punctuation">,</span> CategoryScale<span class="token punctuation">,</span> LinearScale <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;chart.js&#39;</span>

ChartJS<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>Title<span class="token punctuation">,</span> Tooltip<span class="token punctuation">,</span> Legend<span class="token punctuation">,</span> BarElement<span class="token punctuation">,</span> CategoryScale<span class="token punctuation">,</span> LinearScale<span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;BarChart&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span> Bar <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">chartData</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">labels</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&#39;January&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;February&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;March&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">datasets</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&#39;Data One&#39;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">backgroundColor</span><span class="token operator">:</span> <span class="token string">&#39;#f87979&#39;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">]</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="new-reactivity-system" tabindex="-1">New reactivity system <a class="header-anchor" href="#new-reactivity-system" aria-hidden="true">#</a></h2><p>v3 does not update or re-render the chart if new data is passed. You needed to use <code>reactiveProp</code> and <code>reactiveData</code> mixins for that.</p><p>v3:</p><div class="language-javascript"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Line<span class="token punctuation">,</span> mixins <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue-chartjs&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> Line<span class="token punctuation">,</span>
  <span class="token literal-property property">mixins</span><span class="token operator">:</span> <span class="token punctuation">[</span>mixins<span class="token punctuation">.</span>reactiveProp<span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;chartData&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;options&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token function">mounted</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">renderChart</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>chartData<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>v4 charts have data change watcher by default. v4 will update or re-render the chart if new data is passed. Mixins have been removed.</p><p>v4:</p><div class="language-vue"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Bar</span> <span class="token attr-name">:chart-data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>chartData<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// DataPage.vue</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Bar <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue-chartjs&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Chart <span class="token keyword">as</span> ChartJS<span class="token punctuation">,</span> Title<span class="token punctuation">,</span> Tooltip<span class="token punctuation">,</span> Legend<span class="token punctuation">,</span> BarElement<span class="token punctuation">,</span> CategoryScale<span class="token punctuation">,</span> LinearScale <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;chart.js&#39;</span>

ChartJS<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>Title<span class="token punctuation">,</span> Tooltip<span class="token punctuation">,</span> Legend<span class="token punctuation">,</span> BarElement<span class="token punctuation">,</span> CategoryScale<span class="token punctuation">,</span> LinearScale<span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;BarChart&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span> Bar <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function">chartData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token comment">/* mutable chart data */</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div>`,29),o=[e];function c(l,r,u,i,k,d){return s(),a("div",null,o)}var y=n(p,[["render",c]]);export{h as __pageData,y as default};
